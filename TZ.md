# ЗАДАНИЕ Y_LAB: СОЗДАТЬ AUTHENTICATION FORM

## ДАНО

- сделать форму аутентификации через почту и пароль
- но без готовых библиотек компонентов.
- продумать отправку почты/пароля на сервер, замокав `fetch()`.
- использовать React, сборка Vite, TypeScript
- не обращать пока внимания на Linter и Prettier. Может в конце перед сдачей, если останется время
- Результат выложить github pages
- сделать responsive UI

## РАЗМЫШЛЕНИЯ

Аутентификация - процесс подтверждения личности пользователя (исходя из задания это почта и пароль). Мы должны собрать пользовательские данные и куда-то отправить на обработку.

---

#### ЧТО ТАКОЕ ПОЛЬЗОВАТЕЛЬСКИЕ ДАННЫЕ

Это почта и пароль. Перед отправкой удостовериться, что почта и пароль адекватные
- почта будет провалидирована на собачку `@`
- пароль длиной не менее 8 символов
- нельзя пароль отправлять в открытом виде, надо перегонять будет в хеш

---

#### ЧТО ЗНАЧИТ ИХ ОБРАБОТАТЬ ПОСЛЕ ОТПРАВКИ

После отправки данных (валидной почты и хеша валидного пароля) надо принять решение на принимающей стороне, существует ли пользователь в базе данных. Значит есть моковая база данных. Это Map, ключ - уникальная почта пользователя, значение - объект пользователя.

Поля объекта пользователя в бд
- почта (является уникальной для пользователя)
- хеш пароля

В ответе система должна отправить подтверждение или отказ аутентификации. Прислать объект с информацией
- { isAuthenticated: true, meta : { email: `user@email` } }
- { isAuthenticated: false, meta: { error: `error description` } }

По дефолту

---

#### ОСОБЕННОСТИ КЛИЕНТСКОЙ РАЗРАБОТКИ

Необходимо продумать компоненты визуального интерфейса.

Состояние аутентификации пользователя должно быть доступно глобально всей клиентской системе, так как оно может понадобиться любому компоненту. Например, от состояния аутентификации по разному может быть отображен header и\или форма.

Глобальное состояние может выглядеть так:
- { isAuthenticated: false, email: `` } по умолчанию
- { isAuthenticated: true, email: `user@email` }

---

#### ПРОДУМАТЬ КОМПОНЕНТЫ

Пользователь впервые открывает приложение. Что он видит?
- layout позволяет красиво расположить содержимое, залить фон, может в будущем прикрутить theme
- header пустой, приветственный для неаутентифицированного пользователя
- форма аутентификации

Пользователь начинает взаимодействовать: вводит данные аутентификации в форму. Форма состоит из
- Input для ввода `почты`
- Input для ввода `пароля`
- Button `войти`
- Info вспомогательное поле с доп информацией всей формы. Там спиннер или ошибку отправки показать...

При уходе с заполненного поля (blur событие), должна произойти валидация введенного в это поле значения. Если валидация прошла успешно - ничего не делаем. Если не прошла, снизу под полем (не под формой) показать текст ошибки. Значит компонент Input должен тоже содержать информационное поле

После того, как пользователь нажмет кнопку `Войти` отправки формы, если есть ошибки, форму не отправлять. Если ошибок нет,сделать - сетевой запрос (Mock fetch к мок базе данных). Пойдет сетевой запрос, который требует ожидания. Пользователю надо об этом просигнализировать
- disable Button `войти`
- disable Input для ввода `почты`, disable Input для ввода `пароля`
- внизу формы после кнопок управления, будет дополнительный компонент\место Info для показа справочной информации (спиннер для ожидания ответа от сервера \ ошибка отправки формы)

Сетевой запрос может завершиться успешно \ неуспешно. 

Если сетевой запрос неудачный, то в компоненте Info формы показать информационное сообщение для пользователя о неудачном соединении с сервисом. Остаться с компонентом формы, чтобы пользователь мог снова попытаться аутентифицироваться.

Если сетевой запрос удачный, то необходимо 
- обновить глобальное состояние клиентского приложения, зафиксировав факт успешной аутентификации ({ isAuthenticated: true, email: `user@email` }). Данные почты пользователя взять из ответа сервера.
- в header вывести Info поле с почтой пользователя
- в header отобразить кнопку `выйти из системы`, по нажатию на которую сбросить состояние приложения ({ isAuthenticated: false, email: `` }) по умолчанию. Естественно форма аутентификации вернется, а в header сотрется почта пользователя...
- форму аутентификации убрать. Вместо неё отобразить некоторое Info поле по центру экрана  с приветствием в системе Y_LAB

---

###### КОМПОНЕНТЫ ( Layout )
 
- задает центровку всех вложенных компонентов. 
- обеспечивает стилизацию на всю ширину страницы.
- по заданию обеспечивает место\hole для Footer, Form, Info компонентов
- Form, Info компоненты должны выравниваться по визуальному центру, как горизонтальному, так и вертикальному 

###### КОМПОНЕНТЫ ( FormAuth )

Содержит
- title название формы
- Input для ввода `почты`
- Input для ввода `пароля`
- Button `войти`
- Info вспомогательное поле с доп информацией всей формы. Там спиннер или ошибку отправки показать...

Хорошим тоном будет при отрисовке FormAuth выставлять фокус на Input почты, если все Input-ы не заполнены

Осуществляет проверку всех вложенных Input на предмет наличия в них ошибок. Если ошибки есть, форму не отправлять. Держать кнопку отправки формы (Button `войти`) неактивной, пока не пропадут ошибки вложенных Input, или пока все Input-ы не заполнены

При отправке запроса аутентификации
- блокировать все Input-ы и Button `войти`
- в Info компоненте показать спиннер ожидания сетевого взаимодействия

При неудачном запросе аутентификации показать в Info соответствующее сообщение

Если пользователь аутентифицирован, FormAuth не должна быть показана вообще

Состояние формы
- значения Input (email password)
  - label 
  - текущее значение
  - disabled
  - контроллер валидации
    - функция валидации
    - ошибка связанная с функцией валидации
- обработчик submit
- status отправки для Info
- функция, обновляющая глобальное состояние авторизации (в контексте)

###### КОМПОНЕНТЫ ( Input )

Визуально отображает 
- значения пользователя, 
- label 
- ошибку валидации

Чтобы обеспечить визуализацию, Input должен обладать следующими данными
- текущее значение
- текст label 
- disabled
- контроллер валидации, содержащий как функции валидации, так и связанные с ними тексты ошибок
- обработчики событий (onBlur)

###### КОМПОНЕНТЫ ( Button )

- содержимое передается через children
- каким цветом показывать информацию - сolor
- цвет фона bgColor
- её могут disabled
- ей определяют поведение через обработчики, например onClick

###### КОМПОНЕНТЫ ( Info )

Показывает любую вложенную информацию. Имеет дополнительную кастомизацию
- содержимое передается через children
- каким цветом показывать информацию - сolor
- цвет фона bgColor
- выравнивание содержимого ( по центру \ слева \ справа \ по ширине) align

###### КОМПОНЕНТЫ ( Header )



---

#### ПОСТАНОВКА ЗАДАЧ

###### Разработка серверной части